"""
Message templates
"""
from typing import Dict, Any, Optional


def get_help_template() -> str:
    """–®–∞–±–ª–æ–Ω –ø–æ–º–æ—â–∏"""
    return """
ü§ñ **Planning Poker Bot**

üìã **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
‚Ä¢ `/join + —Ç–æ–∫–µ–Ω` - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å–µ—Å—Å–∏–∏
‚Ä¢ `/menu` - –ø–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚Ä¢ `/start` - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ –º–µ–Ω—é
‚Ä¢ `/my_role` - –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é —Ä–æ–ª—å

üéØ **–§—É–Ω–∫—Ü–∏–∏:**
‚Ä¢ üÜï –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
‚Ä¢ üìä –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –ø–æ –∑–∞–¥–∞—á–∞–º
‚Ä¢ üìà –ü–æ–¥—Å—á–µ—Ç Story Points
‚Ä¢ üìã –û—Ç—á–µ—Ç—ã –ø–æ —Å–µ—Å—Å–∏—è–º
‚Ä¢ üìä –ò—Ç–æ–≥–∏ –¥–Ω—è

üë• **–†–æ–ª–∏:**
‚Ä¢ üë§ **Participant** - –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
‚Ä¢ üëë **Lead** - –º–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å
‚Ä¢ ‚öôÔ∏è **Admin** - –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å, –Ω–µ –≥–æ–ª–æ—Å—É–µ—Ç
‚Ä¢ üîß **Super Admin** - –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞
"""


def get_error_template(error_type: str, details: Optional[str] = None) -> str:
    """–®–∞–±–ª–æ–Ω –æ—à–∏–±–∫–∏"""
    templates = {
        'permission': "‚ùå –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è.",
        'not_found': "‚ùå –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω.",
        'validation': f"‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: {details or '–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'}",
        'network': "‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
        'internal': "‚ùå –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.",
        'timeout': "‚ùå –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∏—Å—Ç–µ–∫–ª–æ.",
        'rate_limit': "‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ."
    }
    
    return templates.get(error_type, f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞: {details or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}")


def get_success_template(action: str, details: Optional[str] = None) -> str:
    """–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è"""
    templates = {
        'join': "‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ —Å–µ—Å—Å–∏–∏!",
        'leave': "‚úÖ –í—ã –ø–æ–∫–∏–Ω—É–ª–∏ —Å–µ—Å—Å–∏—é!",
        'vote': f"‚úÖ –í–∞—à –≥–æ–ª–æ—Å –∑–∞—Å—á–∏—Ç–∞–Ω: {details or ''}",
        'task_created': "‚úÖ –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ!",
        'session_started': "‚úÖ –°–µ—Å—Å–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –Ω–∞—á–∞—Ç–∞!",
        'session_finished': "‚úÖ –°–µ—Å—Å–∏—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",
        'role_set': f"‚úÖ –†–æ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: {details or ''}",
        'settings_saved': "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!"
    }
    
    return templates.get(action, f"‚úÖ –î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ: {details or ''}")


def get_info_template(info_type: str, data: Optional[Dict[str, Any]] = None) -> str:
    """–®–∞–±–ª–æ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è"""
    templates = {
        'session_info': """
üìä **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏–∏:**
‚Ä¢ –£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {participants_count}
‚Ä¢ –ó–∞–¥–∞—á: {tasks_count}
‚Ä¢ –°—Ç–∞—Ç—É—Å: {status}
        """,
        'participant_info': """
üë§ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–µ:**
‚Ä¢ –ò–º—è: {full_name}
‚Ä¢ –†–æ–ª—å: {role}
‚Ä¢ –ú–æ–∂–µ—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å: {can_vote}
‚Ä¢ –ú–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å: {can_manage}
        """,
        'task_info': """
üìã **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–¥–∞—á–µ:**
‚Ä¢ –¢–µ–∫—Å—Ç: {text}
‚Ä¢ –ü—Ä–æ–≥—Ä–µ—Å—Å: {progress}
‚Ä¢ –û—Ü–µ–Ω–∫–∞: {estimate}
        """,
        'stats_info': """
üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
‚Ä¢ –í—Å–µ–≥–æ –∑–∞–¥–∞—á: {total_tasks}
‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: {completed_tasks}
‚Ä¢ –û–±—â–∏–µ SP: {total_sp}
‚Ä¢ –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: {avg_estimate}
        """
    }
    
    template = templates.get(info_type, "üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")
    
    if data:
        try:
            return template.format(**data)
        except KeyError:
            return template
    
    return template


def get_warning_template(warning_type: str, details: Optional[str] = None) -> str:
    """–®–∞–±–ª–æ–Ω –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è"""
    templates = {
        'already_voted': "‚ö†Ô∏è –í—ã —É–∂–µ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∏!",
        'session_not_active': "‚ö†Ô∏è –°–µ—Å—Å–∏—è –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞.",
        'no_participants': "‚ö†Ô∏è –ù–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è.",
        'timeout_warning': f"‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ! –û—Å—Ç–∞–ª–æ—Å—å {details or '–º–∞–ª–æ'} –≤—Ä–µ–º–µ–Ω–∏.",
        'role_change': "‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.",
        'data_loss': "‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é."
    }
    
    return templates.get(warning_type, f"‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: {details or '–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ'}")


def get_question_template(question_type: str, options: Optional[list] = None) -> str:
    """–®–∞–±–ª–æ–Ω –≤–æ–ø—Ä–æ—Å–∞"""
    templates = {
        'confirm_action': "‚ùì –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?",
        'choose_option': "‚ùì –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:",
        'enter_value': "‚ùì –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ:",
        'select_participant': "‚ùì –í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞:",
        'select_task': "‚ùì –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É:"
    }
    
    base_template = templates.get(question_type, "‚ùì –í–æ–ø—Ä–æ—Å:")
    
    if options:
        options_text = "\n".join([f"‚Ä¢ {option}" for option in options])
        return f"{base_template}\n\n{options_text}"
    
    return base_template
