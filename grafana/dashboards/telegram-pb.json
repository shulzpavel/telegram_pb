{"annotations":{"list":[]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1},{"color":"red","value":10}]}},"overrides":[]},"gridPos":{"h":4,"w":6,"x":0,"y":0},"id":1,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT count(*) as cnt FROM bot_events WHERE ts > now() - interval '1 hour'","refId":"A"}],"title":"Events (last 1h)","type":"stat"},{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1},{"color":"red","value":5}]}},"overrides":[]},"gridPos":{"h":4,"w":6,"x":6,"y":0},"id":2,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto"},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT count(*) as cnt FROM bot_events WHERE ts > now() - interval '1 hour' AND status = 'error'","refId":"A"}],"title":"Errors (last 1h)","type":"stat"},{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":4},"id":3,"options":{"legend":{"displayMode":"list","placement":"bottom","showLegend":true}},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"time_series","rawQuery":true,"rawSql":"SELECT date_trunc('minute', ts) as time, count(*) as events FROM bot_events WHERE $__timeFilter(ts) GROUP BY 1 ORDER BY 1","refId":"A"}],"title":"Events per minute","type":"timeseries"},{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineInterpolation":"smooth","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":5}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":4},"id":4,"options":{"legend":{"displayMode":"list","placement":"bottom","showLegend":true}},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"time_series","rawQuery":true,"rawSql":"SELECT date_trunc('minute', ts) as time, count(*) as errors FROM bot_events WHERE $__timeFilter(ts) AND status = 'error' GROUP BY 1 ORDER BY 1","refId":"A"}],"title":"Errors per minute","type":"timeseries"},{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":12},"id":5,"options":{"displayMode":"gradient","minVizHeight":10,"minVizWidth":0,"namePlacement":"auto","orientation":"horizontal","showUnfilled":true},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT event as metric, count(*) as value FROM bot_events WHERE ts > now() - interval '24 hours' GROUP BY event ORDER BY value DESC LIMIT 10","refId":"A"}],"title":"Top actions (last 24h)","type":"bargauge"},{"datasource":{"type":"postgres","uid":"postgres"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"align":"auto","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":12},"id":6,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true,"sortBy":[]},"targets":[{"datasource":{"type":"postgres","uid":"postgres"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT ts, event, status, payload FROM bot_events WHERE status = 'error' AND $__timeFilter(ts) ORDER BY ts DESC LIMIT 20","refId":"A"}],"title":"Recent errors","type":"table"}],"refresh":"30s","schemaVersion":38,"style":"dark","tags":["telegram-pb","planning-poker"],"templating":{"list":[]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"browser","title":"Telegram PB Overview","uid":"telegram-pb-overview","version":1,"weekStart":""}
